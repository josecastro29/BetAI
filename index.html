<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BetAI â€” Planeador de Apostas</title>
  <link rel="stylesheet" href="style.css">
  
  <!-- Supabase SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  
  <!-- ConfiguraÃ§Ã£o -->
  <script src="config.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <h1>BetAI</h1>
        <p>QuestionÃ¡rio e recomendaÃ§Ãµes de apostas (ferramenta informativa â€” nÃ£o garante resultados).</p>
        <p style="font-size:12px;margin-top:8px;color:#9fb4c8">
          ğŸ“§ Contacto: <a href="mailto:zizucastro2004@gmail.com" style="color:#06b6d4;text-decoration:none">zizucastro2004@gmail.com</a>
        </p>
      </div>
      <div class="account" id="accountArea">
        <button id="openLogin">Entrar / Registar</button>
      </div>
    </header>

    <!-- Sistema de NavegaÃ§Ã£o por Abas -->
    <nav class="tabs-navigation">
      <button class="tab-btn active" data-tab="main">ğŸ¯ Principal</button>
      <button class="tab-btn" data-tab="missions">ğŸ MissÃµes</button>
    </nav>

    <main>
      <!-- ABA PRINCIPAL -->
      <div id="tab-main" class="tab-content active">
      <section class="card">
        <h2>QuestionÃ¡rio</h2>
        <form id="survey">
          <label>Nome (opcional)
            <input type="text" id="name" placeholder="Teu nome">
          </label>

          <h3 style="margin-top:20px;color:#06b6d4;font-size:16px">ğŸ’° InformaÃ§Ã£o Financeira</h3>

          <label>Bankroll (capital disponÃ­vel em â‚¬)
            <input type="number" id="bankroll" value="100" min="1" required>
          </label>

          <label>Montante alvo (â‚¬)
            <input type="number" id="target" value="200" min="1" required>
          </label>

          <label>Horizonte (dias)
            <input type="number" id="timeframe" value="30" min="1" required>
          </label>

          <label>Podes repor o bankroll se perderes tudo?
            <select id="canReload">
              <option value="no">NÃ£o</option>
              <option value="partial">Parcialmente</option>
              <option value="yes">Sim</option>
            </select>
          </label>

          <label>Objetivo principal
            <select id="goal">
              <option value="fun">DiversÃ£o</option>
              <option value="secondary" selected>Rendimento secundÃ¡rio</option>
              <option value="primary">Rendimento principal (âš ï¸ arriscado)</option>
            </select>
          </label>

          <h3 style="margin-top:20px;color:#06b6d4;font-size:16px">ğŸ“Š Historial e ExperiÃªncia</h3>

          <label>ExperiÃªncia em apostas
            <select id="experience">
              <option value="none">Nenhuma</option>
              <option value="low">Baixa (< 6 meses)</option>
              <option value="medium" selected>MÃ©dia (6 meses - 2 anos)</option>
              <option value="high">Alta (2+ anos)</option>
            </select>
          </label>

          <label>Quantas apostas fizeste nos Ãºltimos 30 dias?
            <input type="number" id="recentBets" value="0" min="0">
          </label>

          <label>Qual a tua taxa de sucesso aproximada? (%)
            <input type="number" id="winRate" value="50" min="0" max="100">
            <small style="color:#9fb4c8;font-size:12px">Se Ã©s novo, deixa 50%</small>
          </label>

          <label>Maior sequÃªncia de perdas consecutivas
            <input type="number" id="maxLoss" value="3" min="0" max="20">
          </label>

          <h3 style="margin-top:20px;color:#06b6d4;font-size:16px">ğŸ¯ PreferÃªncias de Apostas</h3>

          <label>PreferÃªncia de esporte
            <select id="sport">
              <option value="mixed">Misturado</option>
              <option value="football" selected>Futebol</option>
              <option value="basketball">Basquetebol</option>
              <option value="tennis">TÃ©nis</option>
              <option value="other">Outro</option>
            </select>
          </label>

          <label>Tipo de apostas preferidas
            <select id="betType">
              <option value="single" selected>Simples (uma aposta de cada vez)</option>
              <option value="combo">MÃºltiplas/Combinadas</option>
              <option value="system">Sistema</option>
              <option value="mixed">Misturado</option>
            </select>
          </label>

          <label>Momento da aposta
            <select id="timing">
              <option value="pre" selected>PrÃ©-jogo</option>
              <option value="live">Live/Ao vivo</option>
              <option value="both">Ambos</option>
            </select>
          </label>

          <label>Range de odds preferidas
            <select id="oddsRange">
              <option value="low">Baixas (1.20-1.80) â€” Seguras</option>
              <option value="medium" selected>MÃ©dias (1.80-2.50) â€” Equilibradas</option>
              <option value="high">Altas (2.50+) â€” Arriscadas</option>
              <option value="mixed">Misturado</option>
            </select>
          </label>

          <label>Mercados favoritos
            <select id="markets">
              <option value="result">Resultado final (1X2)</option>
              <option value="over" selected>Over/Under (golos/pontos)</option>
              <option value="handicap">Handicap</option>
              <option value="btts">Ambas marcam</option>
              <option value="mixed">VÃ¡rios mercados</option>
            </select>
          </label>

          <h3 style="margin-top:20px;color:#06b6d4;font-size:16px">â° Disponibilidade e Disciplina</h3>

          <label>Tempo dedicado por dia a analisar apostas
            <select id="timePerDay">
              <option value="low">< 30 minutos</option>
              <option value="medium" selected>30 min - 2 horas</option>
              <option value="high">2+ horas</option>
            </select>
          </label>

          <label>FrequÃªncia de apostas desejada
            <select id="frequency">
              <option value="daily" selected>DiÃ¡ria</option>
              <option value="weekly">Semanal</option>
              <option value="occasional">Ocasional</option>
            </select>
          </label>

          <label>Defines limites de perda diÃ¡ria/semanal?
            <select id="setLimits">
              <option value="never">Nunca</option>
              <option value="sometimes">Ã€s vezes</option>
              <option value="always" selected>Sempre</option>
            </select>
          </label>

          <label>Consegues parar apÃ³s 2-3 perdas seguidas?
            <select id="stopAfterLoss">
              <option value="no">NÃ£o</option>
              <option value="sometimes">Ã€s vezes</option>
              <option value="yes" selected>Sim</option>
            </select>
          </label>

          <label>JÃ¡ apostaste mais do que devias apÃ³s uma grande perda?
            <select id="chasing">
              <option value="often">Frequentemente</option>
              <option value="sometimes" selected>Ã€s vezes</option>
              <option value="never">Nunca</option>
            </select>
          </label>

          <h3 style="margin-top:20px;color:#06b6d4;font-size:16px">ğŸ§  Conhecimento TÃ©cnico</h3>

          <label>Acompanhas notÃ­cias de lesÃµes/equipas regularmente?
            <select id="followNews">
              <option value="no">NÃ£o</option>
              <option value="sometimes" selected>Ã€s vezes</option>
              <option value="yes">Sim, sempre</option>
            </select>
          </label>

          <label>Usas estatÃ­sticas ou anÃ¡lise de dados?
            <select id="useStats">
              <option value="no">NÃ£o</option>
              <option value="basic" selected>BÃ¡sico (resultados recentes)</option>
              <option value="advanced">AvanÃ§ado (xG, posse, etc.)</option>
            </select>
          </label>

          <label>Conheces estes conceitos?
            <select id="concepts">
              <option value="none">Nenhum</option>
              <option value="basic" selected>Value betting / Expected Value</option>
              <option value="advanced">Kelly Criterion / Variance / CLV</option>
            </select>
          </label>

          <label>Ferramentas que usas
            <select id="tools">
              <option value="none" selected>Nenhuma</option>
              <option value="odds">Comparadores de odds</option>
              <option value="tipsters">Tipsters</option>
              <option value="software">Software de anÃ¡lise</option>
              <option value="multiple">VÃ¡rias ferramentas</option>
            </select>
          </label>

          <h3 style="margin-top:20px;color:#06b6d4;font-size:16px">âš™ï¸ GestÃ£o de Stake</h3>

          <label>TolerÃ¢ncia ao risco
            <select id="risk">
              <option value="low">Baixa (conservador)</option>
              <option value="medium" selected>MÃ©dia (equilibrado)</option>
              <option value="high">Alta (agressivo)</option>
            </select>
          </label>

          <label>MÃ©todo de gestÃ£o de stake preferido
            <select id="staking">
              <option value="flat">Flat (stakes iguais)</option>
              <option value="fraction" selected>Percentagem do bankroll</option>
              <option value="kelly">Kelly (requer estimativa de prob.)</option>
              <option value="confidence">Baseado em confianÃ§a</option>
            </select>
          </label>

          <div class="actions">
            <button type="submit">Gerar recomendaÃ§Ã£o</button>
            <button type="button" id="resetBtn">Limpar</button>
          </div>
        </form>
      </section>

      <!-- Payment / Auth modals -->
      <div id="authModal" class="modal hidden">
        <div class="modal-content">
          <button class="modal-close" id="closeAuth">âœ•</button>
          <h3>Entrar / Registar</h3>
          <div class="tabs">
            <button id="tabLogin">Entrar</button>
            <button id="tabSignup">Registar</button>
          </div>
          <div id="loginBox">
            <label>Email<input id="loginEmail" type="text"></label>
            <label>Password<input id="loginPass" type="password"></label>
            <div class="actions"><button id="doLogin">Entrar</button></div>
          </div>
          <div id="signupBox" class="hidden">
            <label>Nome<input id="signupName" type="text" required></label>
            <label>Email<input id="signupEmail" type="email" required></label>
            <label>NIF (NÃºmero de IdentificaÃ§Ã£o Fiscal)
              <input id="signupNif" type="text" maxlength="9" pattern="[0-9]{9}" placeholder="123456789" required>
              <small style="color:#9fb4c8;font-size:11px;display:block;margin-top:4px">9 dÃ­gitos sem espaÃ§os</small>
            </label>
            <label>TelemÃ³vel
              <input id="signupPhone" type="tel" maxlength="9" pattern="9[1236][0-9]{7}" placeholder="912345678" required>
              <small style="color:#9fb4c8;font-size:11px;display:block;margin-top:4px">9 dÃ­gitos (ex: 91, 92, 93 ou 96)</small>
            </label>
            <label>Password<input id="signupPass" type="password" required></label>
            <div class="actions"><button id="doSignup">Enviar CÃ³digo de VerificaÃ§Ã£o</button></div>
          </div>
          
          <!-- Caixa de VerificaÃ§Ã£o de CÃ³digo SMS -->
          <div id="verificationBox" class="hidden">
            <h4 style="color:#06b6d4;margin-top:0">ğŸ“± VerificaÃ§Ã£o de TelemÃ³vel</h4>
            <p style="font-size:13px;color:#9fb4c8;margin-bottom:16px">
              EnviÃ¡mos um cÃ³digo de 6 dÃ­gitos para o teu telemÃ³vel<br>
              <strong id="verificationPhone"></strong>
            </p>
            <label>CÃ³digo de VerificaÃ§Ã£o
              <input id="verificationCode" type="text" maxlength="6" pattern="[0-9]{6}" placeholder="123456" autocomplete="off" required>
              <small style="color:#9fb4c8;font-size:11px;display:block;margin-top:4px">Introduz o cÃ³digo que recebeste</small>
            </label>
            <div class="actions">
              <button id="doVerify">Verificar e Concluir Registo</button>
              <button id="resendCode" style="background:#374151;margin-left:8px">Reenviar CÃ³digo</button>
            </div>
            <button id="backToSignup" style="background:transparent;border:1px solid #374151;width:100%;margin-top:8px;font-size:12px">â† Voltar</button>
          </div>
        </div>
      </div>

      <div id="paymentModal" class="modal hidden">
        <div class="modal-content">
          <button class="modal-close" id="closePayment">âœ•</button>
          <h3>Desbloqueia Acesso Completo</h3>
          <p>Escolhe um plano para activar todas as funcionalidades premium:</p>
          
          <div class="benefits">
            <h4 style="color:#06b6d4;margin-bottom:12px">âœ¨ O que vais receber:</h4>
            <ul style="list-style:none;padding:0;margin:0 0 20px 0">
              <li style="padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.05)">
                <strong style="color:#10b981">âœ“</strong> AnÃ¡lise personalizada baseada em 20+ critÃ©rios
              </li>
              <li style="padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.05)">
                <strong style="color:#10b981">âœ“</strong> RecomendaÃ§Ãµes de IA adaptadas ao teu perfil
              </li>
              <li style="padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.05)">
                <strong style="color:#10b981">âœ“</strong> Plano semanal detalhado com progressÃ£o
              </li>
              <li style="padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.05)">
                <strong style="color:#10b981">âœ“</strong> Regras de gestÃ£o de risco personalizadas
              </li>
              <li style="padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.05)">
                <strong style="color:#10b981">âœ“</strong> Gerador de stakes com Kelly Criterion
              </li>
              <li style="padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.05)">
                <strong style="color:#10b981">âœ“</strong> Alertas psicolÃ³gicos e de disciplina
              </li>
              <li style="padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.05)">
                <strong style="color:#10b981">âœ“</strong> Benchmarks realistas vs apostadores profissionais
              </li>
              <li style="padding:8px 0">
                <strong style="color:#10b981">âœ“</strong> QuestionÃ¡rios ilimitados para diferentes cenÃ¡rios
              </li>
            </ul>
          </div>

          <div class="plans">
            <div class="plan">
              <h4>Mensal</h4>
              <p>â‚¬10 / mÃªs</p>
              <button class="payBtn" data-plan="monthly">Pagar Mensal</button>
            </div>
            <div class="plan plan-popular">
              <div class="popular-badge">MAIS POPULAR</div>
              <h4>Anual</h4>
              <p class="price-main">â‚¬45 / ano</p>
              <p class="price-compare">em vez de â‚¬120 (12 Ã— â‚¬10)</p>
              <p class="savings">Poupa â‚¬75!</p>
              <button class="payBtn" data-plan="yearly">Pagar Anual</button>
            </div>
          </div>
          
          <div style="text-align:center;margin-top:16px;padding:12px;background:rgba(6,182,212,0.1);border-radius:8px">
            <p style="margin:0;font-size:13px;color:#9fb4c8">
              ğŸ”’ Pagamento seguro processado por Stripe<br>
              ğŸ’¯ Cancela a qualquer momento
            </p>
          </div>
        </div>
      </div>

      <section id="advice" class="card hidden">
        <h2>RecomendaÃ§Ã£o (IA)</h2>
        <div id="adviceContent"></div>
      </section>

      <section id="betBuilder" class="card hidden">
        <h2>Gerador de apostas</h2>
        <p>Introduz uma aposta concreta (nome, odds decimais e a tua estimativa de probabilidade). O sistema calcula stake sugerida (Kelly e outro mÃ©todo).</p>

        <form id="betForm">
          <label>Evento / Aposta
            <input type="text" id="event" placeholder="Ex: Team A vs Team B â€” vitÃ³ria Team A" required>
          </label>

          <label>Odds (decimal)
            <input type="number" id="odds" step="0.01" min="1.01" value="2.00" required>
          </label>

          <label>Tua probabilidade estimada (%)
            <input type="number" id="prob" step="0.1" min="0.1" max="99.9" value="55" required>
          </label>

          <div class="actions">
            <button type="submit">Calcular stake</button>
          </div>
        </form>

        <div id="betResult"></div>
      </section>

      <section class="card">
        <h3>Aviso e Ã©tica</h3>
        <p>Esta ferramenta Ã© meramente informativa. Aconselha-se responsabilidade financeira. NÃ£o sou um consultor financeiro. As apostas envolvem risco de perda total do capital.</p>
      </section>
      </div>
      <!-- FIM ABA PRINCIPAL -->

      <!-- ABA MISSÃ•ES -->
      <div id="tab-missions" class="tab-content">
      <section id="referralSection" class="card">
        <h2>ğŸ Programa de ReferÃªncia</h2>
        
        <div style="background:rgba(6,182,212,0.1);padding:16px;border-radius:8px;margin-bottom:20px">
          <h3 style="color:#06b6d4;margin:0 0 12px 0">Teu CÃ³digo de ReferÃªncia</h3>
          <div style="display:flex;align-items:center;gap:12px;margin-bottom:8px">
            <input id="referralCodeInput" type="text" readonly style="flex:1;font-size:18px;font-weight:bold;text-align:center;color:#06b6d4;background:rgba(0,0,0,0.3);border:2px solid #06b6d4;padding:12px">
            <button id="copyReferralCode" style="padding:12px 20px;background:#06b6d4">ğŸ“‹ Copiar</button>
          </div>
          <input id="referralLinkInput" type="text" readonly style="width:100%;font-size:13px;background:rgba(0,0,0,0.3);border:1px solid #374151;padding:8px;margin-top:8px">
          <button id="copyReferralLink" style="width:100%;margin-top:8px;background:#10b981">ğŸ”— Copiar Link Completo</button>
        </div>

        <div style="background:rgba(16,185,129,0.1);padding:16px;border-radius:8px;margin-bottom:20px">
          <h3 style="color:#10b981;margin:0 0 12px 0">ğŸ’ Teus Pontos</h3>
          <div style="font-size:32px;font-weight:bold;color:#10b981;text-align:center;margin:12px 0">
            <span id="userPoints">0</span> <span style="font-size:18px">pontos</span>
          </div>
          <div style="background:rgba(0,0,0,0.3);border-radius:8px;height:12px;margin:12px 0;overflow:hidden">
            <div id="pointsProgress" style="background:linear-gradient(90deg,#10b981,#06b6d4);height:100%;width:0%;transition:width 0.5s"></div>
          </div>
          <p style="text-align:center;margin:0;font-size:13px;color:#9fb4c8">
            <span id="pointsToNext">20</span> pontos para prÃ³xima recompensa (5â‚¬)
          </p>
        </div>

        <div style="background:rgba(168,85,247,0.1);padding:16px;border-radius:8px;margin-bottom:20px">
          <h3 style="color:#a855f7;margin:0 0 12px 0">ğŸ¯ Como Ganhar Pontos</h3>
          <div style="display:grid;gap:12px">
            <div style="background:rgba(0,0,0,0.3);padding:12px;border-radius:6px;display:flex;justify-content:space-between;align-items:center">
              <span>ğŸ†• Novo registo</span>
              <strong style="color:#10b981">+2 pts</strong>
            </div>
            <div style="background:rgba(0,0,0,0.3);padding:12px;border-radius:6px;display:flex;justify-content:space-between;align-items:center">
              <span>ğŸ’³ SubscriÃ§Ã£o mensal</span>
              <strong style="color:#06b6d4">+6 pts</strong>
            </div>
            <div style="background:rgba(0,0,0,0.3);padding:12px;border-radius:6px;display:flex;justify-content:space-between;align-items:center">
              <span>ğŸ‘‘ SubscriÃ§Ã£o anual</span>
              <strong style="color:#a855f7">+10 pts</strong>
            </div>
          </div>
        </div>

        <div style="background:rgba(234,179,8,0.1);padding:16px;border-radius:8px">
          <h3 style="color:#eab308;margin:0 0 12px 0">ğŸ† Recompensas</h3>
          <div style="display:grid;gap:8px;font-size:14px">
            <div style="padding:8px;background:rgba(0,0,0,0.3);border-radius:4px;display:flex;justify-content:space-between">
              <span>20 pontos</span>
              <strong style="color:#eab308">5â‚¬</strong>
            </div>
            <div style="padding:8px;background:rgba(0,0,0,0.3);border-radius:4px;display:flex;justify-content:space-between">
              <span>50 pontos</span>
              <strong style="color:#eab308">15â‚¬</strong>
            </div>
            <div style="padding:8px;background:rgba(0,0,0,0.3);border-radius:4px;display:flex;justify-content:space-between">
              <span>100 pontos</span>
              <strong style="color:#eab308">35â‚¬</strong>
            </div>
          </div>
        </div>

        <div id="referralStats" style="margin-top:20px;padding:16px;background:rgba(255,255,255,0.02);border-radius:8px">
          <h4 style="color:#06b6d4;margin:0 0 12px 0">ğŸ“Š Tuas ReferÃªncias</h4>
          <p style="text-align:center;color:#9fb4c8" id="referralStatsContent">Carregando...</p>
        </div>
      </section>
      </div>
      <!-- FIM ABA MISSÃ•ES -->

    </main>

    <footer>
      <small>Gerado por BetAI â€” ferramenta local de demonstraÃ§Ã£o.</small>
    </footer>
  </div>

  <script src="app.js"></script>
</body>
</html>
